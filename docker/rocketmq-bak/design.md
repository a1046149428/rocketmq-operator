
## 数据结构

具有GroupReplica的概念
一个groupReplica对应一个statefulset

### ALL-MASTER模式:
#### statefulset 0
```
#This file was auto generated by rocketmq operator. DO NOT EDIT.
brokerClusterName=DefaultCluster
brokerName=broker-0
brokerId=0
deleteWhen=04
fileReservedTime=48
brokerRole=ASYNC_MASTER
flushDiskType=ASYNC_FLUSH

```
#### statefulset 1
```
#This file was auto generated by rocketmq operator. DO NOT EDIT.
brokerClusterName=DefaultCluster
brokerName=broker-1
brokerId=0
deleteWhen=04
fileReservedTime=48
brokerRole=ASYNC_MASTER
flushDiskType=ASYNC_FLUSH

```

### MASTER-SLAVE模式:
#### statefulset 0
```
#This file was auto generated by rocketmq operator. DO NOT EDIT.
brokerClusterName=DefaultCluster
brokerName=broker-0
brokerId=0
deleteWhen=04
fileReservedTime=48
brokerRole=ASYNC_MASTER
flushDiskType=ASYNC_FLUSH

#This file was auto generated by rocketmq operator. DO NOT EDIT.
brokerClusterName=DefaultCluster
brokerName=broker-0
brokerId=1
deleteWhen=04
fileReservedTime=48
brokerRole=SLAVE
flushDiskType=ASYNC_FLUSH

```

#### statefulset 1
```
#This file was auto generated by rocketmq operator. DO NOT EDIT.
brokerClusterName=DefaultCluster
brokerName=broker-1
brokerId=0
deleteWhen=04
fileReservedTime=48
brokerRole=ASYNC_MASTER
flushDiskType=ASYNC_FLUSH

#This file was auto generated by rocketmq operator. DO NOT EDIT.
brokerClusterName=DefaultCluster
brokerName=broker-1
brokerId=1
deleteWhen=04
fileReservedTime=48
brokerRole=SLAVE
flushDiskType=ASYNC_FLUSH

```


### sync-master-no-slave/async-master-no-slave

该模式下：
没有Group的概念，只启1个StatefulSet，每个StatefulSet启1个Master Pod，每个Pod都打上master label
一个Cluster对应一个StatefulSet
pod的brokerName中可以取broker StatefulSet pod hostname最后一位作为brokerName的index
pod的brokerId都设置为0

例如：

```
#This file was auto generated by rocketmq operator. DO NOT EDIT.
brokerClusterName=DefaultCluster
brokerName=broker-0
brokerId=0
deleteWhen=04
fileReservedTime=48
brokerRole=ASYNC_MASTER
flushDiskType=ASYNC_FLUSH

#This file was auto generated by rocketmq operator. DO NOT EDIT.
brokerClusterName=DefaultCluster
brokerName=broker-1
brokerId=0
deleteWhen=04
fileReservedTime=48
brokerRole=ASYNC_MASTER
flushDiskType=ASYNC_FLUSH

```


### sync-master-slave/async-master-slave

该模式下：
具有Group的概念
一个Cluster对应多个Group(Service+StatefulSet)
根据GroupReplica数量决定启多少个StatefulSet
根据MembersPerGroup确定每个StatefulSet中启多少个Pod，每个StatefulSet启1个Master Pod，MembersPerGroup-1个Slave Pod
总Pod数=GroupReplica * MembersPerGroup

pod的brokerName中可以取group的index作为brokerName的index
pod的brokerId可以取broker StatefulSet pod hostname最后一位

例如：

#### group 0
```
#This file was auto generated by rocketmq operator. DO NOT EDIT.
brokerClusterName=DefaultCluster
brokerName=broker-0
brokerId=0
deleteWhen=04
fileReservedTime=48
brokerRole=ASYNC_MASTER
flushDiskType=ASYNC_FLUSH

#This file was auto generated by rocketmq operator. DO NOT EDIT.
brokerClusterName=DefaultCluster
brokerName=broker-0
brokerId=1
deleteWhen=04
fileReservedTime=48
brokerRole=SLAVE
flushDiskType=ASYNC_FLUSH

#This file was auto generated by rocketmq operator. DO NOT EDIT.
brokerClusterName=DefaultCluster
brokerName=broker-0
brokerId=2
deleteWhen=04
fileReservedTime=48
brokerRole=SLAVE
flushDiskType=ASYNC_FLUSH

```
#### group 1
```
#This file was auto generated by rocketmq operator. DO NOT EDIT.
brokerClusterName=DefaultCluster
brokerName=broker-1
brokerId=0
deleteWhen=04
fileReservedTime=48
brokerRole=ASYNC_MASTER
flushDiskType=ASYNC_FLUSH

#This file was auto generated by rocketmq operator. DO NOT EDIT.
brokerClusterName=DefaultCluster
brokerName=broker-1
brokerId=1
deleteWhen=04
fileReservedTime=48
brokerRole=SLAVE
flushDiskType=ASYNC_FLUSH

#This file was auto generated by rocketmq operator. DO NOT EDIT.
brokerClusterName=DefaultCluster
brokerName=broker-1
brokerId=2
deleteWhen=04
fileReservedTime=48
brokerRole=SLAVE
flushDiskType=ASYNC_FLUSH

```